- id: '1591481819436'
  alias: System - Startup Tasks
  description: ''
  trigger:
  - event: start
    platform: homeassistant
  condition: []
  action:
  - data:
      payload: announce
      topic: shellies/command
    service: mqtt.publish
  - data:
      topic: cmnd/tasmotas/state
    service: mqtt.publish
  - data:
      topic: cmnd/tasmotas/status
      payload: '2'
    service: mqtt.publish
  - data:
      topic: cmnd/tasmotas/status
      payload: '11'
    service: mqtt.publish
  mode: single
- id: '1603043020584'
  alias: Doorbell - Front Ring
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.doorbell_doorbell
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: time
    after: 08:00:00
    before: '22:00:00'
  - condition: state
    entity_id: group.family_devices
    state: home
  action:
  - service: media_player.play_media
    data:
      media_content_id: https://home.eatsleepbreach.ca/local/doorbell_front.mp3
      media_content_type: music
    target:
      device_id:
      - c03750400bd411ebbd21d302c0018c1a
      - c03891860bd411eba6bb6b655e54293d
  - service: camera.play_stream
    data:
      media_player:
      - media_player.master_bedroom_display
      - media_player.office_display
  - delay:
      hours: 0
      minutes: 2
      seconds: 0
      milliseconds: 0
  - service: media_player.turn_off
    data: {}
    target:
      entity_id:
      - media_player.master_bedroom_display
      - media_player.office_display
  mode: parallel
  max: 10
- id: '1602687924312'
  alias: Cover - Garage Door Opened
  description: ''
  trigger:
  - platform: state
    entity_id: cover.garage_door
    from: closed
    to: open
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.ios_all_devices
    data:
      message: Garage Cover has been opened.
      title: "\U0001F697 Garage Cover Opened!"
      data:
        attachment:
          content-type: jpeg
          hide-thumbnail: false
        push:
          category: camera
        entity_id: camera.garage_snapshot
  mode: single
- id: '1602786040005'
  alias: Notify - Mailbox
  description: ''
  trigger:
  - type: vibration
    platform: device
    device_id: 36d2ce018f352aab0ae0c1d81eec0b00
    entity_id: binary_sensor.vibration_mailbox_vibration
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.ios_all_devices
    data:
      message: You've got mail!
      title: "\U0001F4EC Mailbox"
      data:
        attachment:
          content-type: jpeg
          hide-thumbnail: false
        push:
          category: camera
        entity_id: camera.front_door_snapshot
  mode: single
- id: '1591375582026'
  alias: Lock - Secure all at night
  description: ''
  trigger:
  - at: '21:00:00'
    platform: time
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - data: {}
    service: lock.lock
    target:
      entity_id:
      - lock.back_door_lock
      - lock.front_door_lock
      - lock.garage_door_lock
  mode: single
- id: '1602346908294'
  alias: Lock - Front Door Unlocked
  description: ''
  trigger:
  - platform: device
    device_id: 17ad4d3482096182954b88c4f35bb21f
    domain: lock
    entity_id: lock.front_door_lock
    type: unlocked
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: numeric_state
    entity_id: sensor.uptime_minutes
    above: '3.0'
  - type: is_no_motion
    condition: device
    device_id: 0f34f53f31643c2d0308786febfb660a
    entity_id: binary_sensor.motion_front_door_inside_occupancy
    domain: binary_sensor
  action:
  - service: notify.ios_all_devices
    data:
      message: Front Door has been opened.
      title: "\U0001F6AA Front Door Unlocked!"
      data:
        attachment:
          content-type: jpeg
          hide-thumbnail: false
        push:
          category: camera
        entity_id: camera.front_door_snapshot
  mode: single
- id: '1603502802809'
  alias: Lock - Back Door Unlocked
  description: ''
  trigger:
  - platform: device
    device_id: 87bc70b6345efdbf37f8c5b676cf3e4d
    domain: lock
    entity_id: lock.back_door_lock
    type: unlocked
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: numeric_state
    entity_id: sensor.uptime_minutes
    above: '3.0'
  - type: is_no_motion
    condition: device
    device_id: 78493bd91a6c4aaa7ff02541d827d747
    entity_id: binary_sensor.motion_back_door_inside_occupancy
    domain: binary_sensor
  action:
  - service: notify.ios_all_devices
    data:
      message: Back Door has been opened.
      title: "\U0001F6AA Back Door Unlocked!"
      data:
        attachment:
          content-type: jpeg
          hide-thumbnail: false
        push:
          category: camera
        entity_id: camera.back_door_snapshot
  mode: single
- id: '1602687787297'
  alias: Lock - Garage Door Unlocked
  description: ''
  trigger:
  - platform: device
    device_id: 5fa5f875376772df0a5008c64b7b4eea
    domain: lock
    entity_id: lock.garage_door_lock
    type: unlocked
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: numeric_state
    entity_id: sensor.uptime_minutes
    above: '3.0'
  action:
  - service: notify.ios_all_devices
    data:
      message: Garage Door has been opened.
      title: "\U0001F6AA Garage Door Unlocked!"
      data:
        attachment:
          content-type: jpeg
          hide-thumbnail: false
        push:
          category: camera
        entity_id: camera.back_door_snapshot
  mode: single
- id: '1602440187444'
  alias: Amps - Power Control
  description: ''
  trigger:
  - platform: state
    entity_id: media_player.patio_speaker
  - platform: state
    entity_id: media_player.master_bedroom_speaker
  - platform: state
    entity_id: media_player.kitchen_ceiling
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ trigger.to_state.state == ''playing'' }}'
      sequence:
      - service: switch.turn_on
        data: {}
        entity_id: switch.amp
    default:
    - repeat:
        until:
        - condition: and
          conditions:
          - condition: state
            entity_id: media_player.kitchen_ceiling
            state: 'off'
            for:
              hours: 0
              minutes: 5
              seconds: 0
          - condition: state
            entity_id: media_player.patio_speaker
            state: 'off'
            for:
              hours: 0
              minutes: 5
              seconds: 0
          - condition: state
            entity_id: media_player.master_bedroom_speaker
            state: 'off'
            for:
              hours: 0
              minutes: 5
              seconds: 0
        sequence:
        - service: switch.turn_off
          data: {}
          target:
            entity_id: switch.amp
  mode: single
- id: '1602435177490'
  alias: Light - Seasonal Effects
  description: ''
  trigger:
  - platform: state
    entity_id: light.front_porch
    to: 'on'
    from: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sensor.month
        state: December
      sequence:
      - service: light.turn_on
        data:
          effect: Christmas
        entity_id: light.front_porch
    - conditions:
      - condition: state
        entity_id: sensor.month
        state: October
      sequence:
      - service: light.turn_on
        data:
          effect: Halloween
    default: []
  mode: single
- id: '1602430306575'
  alias: Light - Sunrise
  description: ''
  trigger:
  - platform: sun
    event: sunrise
    offset: 00:10:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: switch.turn_off
    data: {}
    target:
      entity_id:
      - switch.front_door
      - switch.back_door
      - switch.garage_exterior_lights
  - type: turn_off
    device_id: 38d965d356ff44218994d149daf1634c
    entity_id: light.front_porch
    domain: light
  mode: single
- id: '1602430417396'
  alias: Light - Sunset
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: -00:05:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: switch.turn_on
    data: {}
    target:
      entity_id:
      - switch.front_door
      - switch.back_door
      - switch.garage_exterior_lights
  - service: light.turn_on
    data:
      brightness_pct: 100
      color_name: yellow
    entity_id: light.front_porch
  mode: single
- id: '1598110682886'
  alias: Cover - Garage Cover Open for 5 Minutes
  description: ''
  trigger:
  - entity_id: cover.garage_door
    for: 00:05:00
    from: closed
    platform: state
    to: open
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - data:
      actions:
      - action: close_garage
        title: Close Garage Door
      message: Garage door has been open for 5 minutes. Close it?
      title: "\U0001F699 Garage left open!"
    service: notify.ios_all_devices
  mode: single
- id: '1602274353769'
  alias: Laundry - Notifications
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.dryer
    attribute: remain_time
    to: 0:01:00
    from: 0:02:00
    id: dryer_done
  - platform: state
    entity_id: sensor.washer
    id: washer_done
    from: 0:02:00
    to: 0:01:00
    attribute: remain_time
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: dryer_done
      sequence:
      - service: input_text.set_value
        target:
          entity_id: input_text.dryer_time
        data:
          value: '{{ relative_time(states.sensor.dryer.attributes.initial_time) }}'
      - delay:
          hours: 0
          minutes: 1
          seconds: 0
          milliseconds: 0
      - service: notify.ios_all_devices
        data:
          title: "\U0001F9E6 Dryer is done!"
          message: '{%- if is_state(''sensor.washer'', ''on'') %}Washer will be done
            in {{ relative_time(states.sensor.washer.attributes.remain_time) }}{%-
            else -%}Cycle took {{ states(''input_text.dryer_time'') }}{% endif %}'
    - conditions:
      - condition: trigger
        id: washer_done
      sequence:
      - service: input_text.set_value
        target:
          entity_id: input_text.washer_time
        data:
          value: '{{ relative_time(states.sensor.washer.attributes.initial_time) }}'
      - delay:
          hours: 0
          minutes: 1
          seconds: 0
          milliseconds: 0
      - service: notify.ios_all_devices
        data:
          title: "\U0001F455 Washer is done!"
          message: '{%- if is_state(''sensor.dryer'', ''on'') %}Dryer will be done
            in {{ relative_time(states.sensor.dryer.attributes.remain_time) }}{%-
            else -%}Cycle took {{ states(''input_text.washer_time'') }}{% endif %}'
    default: []
  mode: single
- id: '1605810087167'
  alias: Waste Collection - Collection Day Alerts
  description: Turn on the kitchen LEDs depending on the collection day.
  trigger:
  - platform: time
    at: '17:00:00'
    id: 5pm_time
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sensor.black_bin
        state: tomorrow
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 100
          color_name: red
        entity_id: light.kitchen_cabinets
    - conditions:
      - condition: state
        entity_id: sensor.blue_bin
        state: tomorrow
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 100
          color_name: blue
        entity_id: light.kitchen_left_led
    - conditions:
      - condition: state
        entity_id: sensor.green_bin
        state: tomorrow
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 100
          color_name: green
        entity_id: light.kitchen_right_led
    default: []
  mode: single
- id: '1607991157120'
  alias: Notify - Refrigerator Open
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: c58dfc0d22b38b87d0482e1c65b2a256
    entity_id: binary_sensor.door_refridgerator_contact
    domain: binary_sensor
    for:
      hours: 0
      minutes: 5
      seconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - repeat:
      until:
      - type: is_not_open
        condition: device
        device_id: c58dfc0d22b38b87d0482e1c65b2a256
        entity_id: binary_sensor.door_refridgerator_contact
        domain: binary_sensor
      sequence:
      - service: notify.ios_all_devices
        data:
          message: Close the fridge!
          title: "\U0001F9CA Refrigerator"
      - delay: 00:02:00
  mode: single
- id: '1608008281551'
  alias: Alarm - Disarm at Time
  description: Disarm the alarm based on the time
  trigger:
  - platform: time
    at: input_datetime.alarm_disarm
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: group.family_devices
    state: home
  action:
  - service: alarm_control_panel.alarm_disarm
    data: {}
    entity_id: alarm_control_panel.calgary_alarm
  mode: single
- id: '1608334851404'
  alias: Alarm - Arm Home
  description: ''
  trigger:
  - platform: time
    at: input_datetime.alarm_arm
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: group.family_devices
    state: home
  action:
  - service: switch.turn_off
    data: {}
    entity_id: switch.garage_cover_outlet_2
  - service: alarm_control_panel.alarm_arm_home
    data: {}
    entity_id: alarm_control_panel.calgary_alarm
  - service: input_boolean.turn_on
    target:
      entity_id: input_boolean.quiet_time
    data: {}
  - service: switch.turn_on
    target:
      entity_id: switch.entryway_outlet_1
    data: {}
  mode: single
- id: '1609684788084'
  alias: Presence - Family is Away
  description: Arm Alarm, Climate Away, Shut things off, Notify open windows
  trigger:
  - platform: state
    entity_id: group.family_devices
    from: home
    to: not_home
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: input_boolean.guestmode
    state: 'off'
  action:
  - service: alarm_control_panel.alarm_arm_away
    target:
      device_id: d2f4d5b400ef24f2f92f7e5beb98fd34
    data: {}
  - service: switch.turn_on
    target:
      entity_id: switch.entryway_outlet_1
    data: {}
  - service: climate.set_preset_mode
    target:
      entity_id:
      - climate.main_floor
      - climate.master_bathroom
    data:
      preset_mode: Away
  - service: light.turn_off
    data: {}
    target:
      entity_id: light.inside_lights
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.all_windows
        state: 'on'
      sequence:
      - service: notify.ios_all_devices
        data:
          message: '{{ states | selectattr(''entity_id'',''in'', state_attr(''binary_sensor.all_windows'',''entity_id''))
            | selectattr(''state'',''eq'',''on'') | map(attribute=''name'') | join('',
            '') }}

            '
          title: "\U0001FA9F Windows Open:"
          data: {}
    default: []
  mode: single
- id: '1613599134512'
  alias: Printer - Power Control
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.lexmark_cs310_series
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: not
    conditions:
    - condition: state
      entity_id: sensor.lexmark_cs310_series
      state: unavailable
  action:
  - choose:
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: sensor.lexmark_cs310_series
          state: idle
      sequence:
      - service: switch.turn_on
        data: {}
        target:
          entity_id: switch.switch_printer
    default:
    - condition: state
      entity_id: sensor.lexmark_cs310_series
      state: idle
      for:
        hours: 0
        minutes: 30
        seconds: 0
    - service: switch.turn_off
      data: {}
      target:
        entity_id: switch.switch_printer
  mode: single
- id: '1614538081222'
  alias: Door - Basement Stairs Light
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.basement_door
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: device
    type: is_off
    device_id: 82e0c17532a89c0f67d225445a48a13c
    entity_id: switch.basement_stairs
    domain: switch
    for:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  action:
  - service: switch.turn_on
    data: {}
    target:
      entity_id: switch.basement_stairs
  mode: single
- id: '1614558915813'
  alias: Climate - Window Control
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.all_windows
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.all_windows
        state: 'on'
      sequence:
      - service: climate.set_hvac_mode
        target:
          entity_id: climate.main_floor
        data:
          hvac_mode: 'off'
      - service: climate.set_fan_mode
        target:
          entity_id: climate.main_floor
        data:
          fan_mode: 'on'
    - conditions:
      - condition: state
        entity_id: binary_sensor.all_windows
        state: 'off'
      sequence:
      - service: climate.turn_on
        target:
          entity_id: climate.main_floor
        data: {}
      - service: climate.set_preset_mode
        target:
          entity_id: climate.main_floor
        data:
          preset_mode: Home
      - service: climate.set_fan_mode
        target:
          entity_id: climate.main_floor
        data:
          fan_mode: auto
    default: []
  mode: single
- id: '1614829216486'
  alias: Light - Kitchen Night Light Motion
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: 149cb6ad605345b28fa0b9e63ddd9cfc
    entity_id: binary_sensor.motion_upstairs_stairway_occupancy
    domain: binary_sensor
  - type: motion
    platform: device
    device_id: e8d280d931dfd93ddacfcfe74785c318
    entity_id: binary_sensor.stairway_motion
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: sun.sun
    state: below_horizon
  - condition: state
    entity_id: light.island
    state: 'off'
  - condition: state
    entity_id: switch.kitchen_light
    state: 'off'
  action:
  - service: light.turn_on
    data:
      brightness_pct: 100
      rgb_color:
      - 255
      - 255
      - 0
    target:
      entity_id: light.kitchen_cabinets
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - service: light.turn_off
    data: {}
    target:
      entity_id:
      - light.kitchen_left_led
      - light.kitchen_right_led
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  mode: single
- id: '1615395552931'
  alias: Blind - Dining Room
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: 00:05:00
    id: sunset
  - platform: time
    at: 08:30:00
    id: morning
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: input_select.blinds_dining_room_mode
    state: Automatic
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: sunset
      - type: is_not_open
        condition: device
        device_id: 3a7619b5375a979495ac7f6ed872fbfb
        entity_id: binary_sensor.dining_room_window
        domain: binary_sensor
      sequence:
      - device_id: a188d65077fed6db336e64e4bf6affac
        domain: cover
        entity_id: cover.blinds_dining_room
        type: set_position
        position: 0
    - conditions:
      - condition: trigger
        id: morning
      sequence:
      - device_id: a188d65077fed6db336e64e4bf6affac
        domain: cover
        entity_id: cover.blinds_dining_room
        type: set_position
        position: 100
    default: []
  mode: single
- id: '1615478976864'
  alias: Switch - Basement Stairs Inactivity
  description: ''
  trigger:
  - platform: state
    entity_id: switch.basement_stairs
    to: 'on'
    for: 00:05:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - type: is_no_motion
    condition: device
    device_id: e8d280d931dfd93ddacfcfe74785c318
    entity_id: binary_sensor.stairway_motion
    domain: binary_sensor
  action:
  - service: switch.turn_off
    target:
      entity_id: switch.basement_stairs
  mode: single
- id: '1615652464813'
  alias: Blind - Library
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: 00:05:00
    id: sunset
  - platform: time
    at: 08:30:00
    id: morning
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: input_select.blinds_library_mode
    state: Automatic
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: sunset
      sequence:
      - service: cover.close_cover
        target:
          entity_id: cover.blinds_library
    - conditions:
      - condition: trigger
        id: morning
      sequence:
      - service: cover.open_cover
        target:
          entity_id: cover.blinds_library
    default: []
  mode: single
- id: '1615652668231'
  alias: Blind - Stairway
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: 00:05:00
    id: sunset
  - platform: time
    at: 08:30:00
    id: morning
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: input_select.blinds_stairway_mode
    state: Automatic
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: sunset
      sequence:
      - device_id: 1d12d8fb4efd74d94cafdee673e25260
        domain: cover
        entity_id: cover.blinds_stairway
        type: set_position
        position: 0
    - conditions:
      - condition: trigger
        id: morning
      sequence:
      - device_id: 1d12d8fb4efd74d94cafdee673e25260
        domain: cover
        entity_id: cover.blinds_stairway
        type: set_position
        position: 100
    default: []
  mode: single
- id: '1615754157293'
  alias: Tag - Front Door Camera
  description: Turns off camera alerts when scanned
  trigger:
  - platform: tag
    tag_id: 07a17b17-1185-4176-b8ee-9e45dcab91e8
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: switch.turn_off
    target:
      entity_id: switch.front_door_detect
  - delay:
      hours: 4
      minutes: 0
      seconds: 0
      milliseconds: 0
  - service: switch.turn_on
    target:
      entity_id: switch.front_door_detect
  mode: single
- id: '1615757783776'
  alias: Tag - Back Door Camera
  description: Turns off camera alerts when scanned
  trigger:
  - platform: tag
    tag_id: d8e2ba2e-778c-41a1-a2ef-2a5a15142534
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: switch.turn_off
    target:
      entity_id:
      - switch.back_door_detect
  mode: single
- id: '1618257119742'
  alias: Notify - Water Leak
  description: ''
  trigger:
  - type: moist
    platform: device
    device_id: bc44ee932cad5e210f67fedd29f5122f
    entity_id: binary_sensor.water_bathtub_water_leak
    domain: binary_sensor
  - type: moist
    platform: device
    device_id: 297f98a078bddcfa54dc422fbad78435
    entity_id: binary_sensor.water_refridgerator_water_leak
    domain: binary_sensor
  - type: moist
    platform: device
    device_id: b73db99d33265e049001e327beac4fec
    entity_id: binary_sensor.water_dishwasher_water_leak
    domain: binary_sensor
  - type: moist
    platform: device
    device_id: 3da3e3926525072ac401491a9a666261
    entity_id: binary_sensor.water_hot_water_heater_water_leak
    domain: binary_sensor
  - type: moist
    platform: device
    device_id: 577dc1f19b006cdf9b4fbae2f2af8c62
    entity_id: binary_sensor.water_sump_pump_water_leak
    domain: binary_sensor
  - type: moist
    platform: device
    device_id: ce60c16e1cba284cba4196d00e959a46
    entity_id: binary_sensor.water_washing_machine_water_leak
    domain: binary_sensor
  - type: moist
    platform: device
    device_id: 0426bba0bafd8b76b349d8e23667e28e
    entity_id: binary_sensor.water_laundry_mains_water_leak
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.ios_all_devices
    data:
      message: Water Leak!
      title: "\U0001F4A7\t {{ trigger.to_state.attributes.friendly_name }}"
      data:
        push:
          sound:
            name: default
            critical: 1
            volume: 1
        attachment:
          url: https://home.eatsleepbreach.ca/local/cast_waterleak.png
          content-type: png
          hide-thumbnail: false
  mode: single
- id: '1618258922360'
  alias: Quiet Time - Set Preferences
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.quiet_time
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.quiet_time
        state: 'on'
      sequence:
      - service: automation.turn_off
        target:
          entity_id: automation.doorbell_front_ring
        data: {}
      - service: media_player.volume_set
        target:
          entity_id:
          - media_player.kitchen_ceiling
          - media_player.master_bedroom_display
          - media_player.master_bedroom_speaker
          - media_player.theater_speaker
          - media_player.office_display
          - media_player.dining_room_pair
        data:
          volume_level: 0.1
      - device_id: 5f628eea7411345bf14420a07eaa74b3
        domain: select
        entity_id: select.doorbell_doorbell_text
        type: select_option
        option: DO NOT DISTURB
      - device_id: 5f628eea7411345bf14420a07eaa74b3
        domain: select
        entity_id: select.doorbell_chime_type
        type: select_option
        option: None
      - service: number.set_value
        data:
          value: '2'
        target:
          entity_id:
          - number.back_door_keypad_volume
      - service: number.set_value
        data:
          value: '2'
        target:
          entity_id: number.bedroom_keypad_volume
      - service: number.set_value
        data:
          value: '2'
        target:
          entity_id: number.calgary_base_station_volume
      - service: number.set_value
        data:
          value: '2'
        target:
          entity_id: number.entryway_keypad_volume
    - conditions:
      - condition: state
        entity_id: input_boolean.quiet_time
        state: 'off'
      sequence:
      - service: automation.turn_on
        target:
          entity_id: automation.doorbell_front_ring
        data: {}
      - service: media_player.volume_set
        target:
          entity_id:
          - media_player.kitchen_ceiling
          - media_player.master_bedroom_display
          - media_player.master_bedroom_speaker
          - media_player.theater_speaker
          - media_player.office_display
          - media_player.dining_room_pair
        data:
          volume_level: 0.4
      - device_id: 5f628eea7411345bf14420a07eaa74b3
        domain: select
        entity_id: select.doorbell_doorbell_text
        type: select_option
        option: Default Message (WELCOME)
      - device_id: 5f628eea7411345bf14420a07eaa74b3
        domain: select
        entity_id: select.doorbell_chime_type
        type: select_option
        option: Mechanical
      - service: number.set_value
        data:
          value: '50'
        target:
          entity_id:
          - number.back_door_keypad_volume
      - service: number.set_value
        data:
          value: '50'
        target:
          entity_id: number.bedroom_keypad_volume
      - service: number.set_value
        data:
          value: '50'
        target:
          entity_id: number.calgary_base_station_volume
      - service: number.set_value
        data:
          value: '50'
        target:
          entity_id: number.entryway_keypad_volume
    default: []
  mode: single
- id: '1619906631532'
  alias: Wall Tablet - Turn On With Motion
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: 7ac8845a126b380579fb7687aeafbe2d
    entity_id: binary_sensor.motion_hallway_occupancy
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: time
    after: input_datetime.alarm_disarm
    before: input_datetime.alarm_arm
  action:
  - service: notify.mobile_app_jareds_ipad
    data:
      message: Wacky Wacky
      title: Wake up
  mode: single
- id: '1620235815662'
  alias: Library - Bookshelf Sun Protection
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.multi_sensor_illuminance
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: input_select.blinds_library_mode
    state: Automatic
  - condition: state
    entity_id: sun.sun
    state: above_horizon
  - condition: state
    entity_id: input_boolean.quiet_time
    state: 'off'
  - condition: state
    entity_id: input_boolean.meeting_time
    state: 'off'
  - condition: state
    entity_id: binary_sensor.library_occupancy
    state: 'off'
  action:
  - choose:
    - conditions:
      - condition: and
        conditions:
        - type: is_illuminance
          condition: device
          device_id: f861f2d5c0cd538a28aa9aef5f9d7335
          entity_id: sensor.multi_sensor_illuminance
          domain: sensor
          above: 2000
        - condition: state
          entity_id: cover.blinds_library
          state: open
      sequence:
      - service: cover.close_cover
        target:
          entity_id: cover.blinds_library
        data: {}
      - delay:
          hours: 0
          minutes: 15
          seconds: 0
          milliseconds: 0
    - conditions:
      - condition: and
        conditions:
        - type: is_illuminance
          condition: device
          device_id: f861f2d5c0cd538a28aa9aef5f9d7335
          entity_id: sensor.multi_sensor_illuminance
          domain: sensor
          below: 2000
        - condition: state
          entity_id: cover.blinds_library
          state: closed
        - condition: time
          after: 00:08:30
          before: '18:00:00'
      sequence:
      - service: cover.open_cover
        target:
          entity_id: cover.blinds_library
        data: {}
      - delay:
          hours: 0
          minutes: 15
          seconds: 0
          milliseconds: 0
    default: []
  mode: single
- id: '1620237989306'
  alias: Meeting Time - Set Preferences
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.meeting_time
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.meeting_time
        state: 'on'
      sequence:
      - service: automation.turn_off
        target:
          entity_id: automation.doorbell_front_ring
        data: {}
      - service: media_player.volume_set
        target:
          entity_id:
          - media_player.dining_room_speaker
          - media_player.kitchen_ceiling
          - media_player.living_room_speaker
          - media_player.office_display
        data:
          volume_level: 0
      - device_id: 5f628eea7411345bf14420a07eaa74b3
        domain: select
        entity_id: select.doorbell_doorbell_text
        type: select_option
        option: DO NOT DISTURB
      - device_id: 5f628eea7411345bf14420a07eaa74b3
        domain: select
        entity_id: select.doorbell_chime_type
        type: select_option
        option: None
      - service: number.set_value
        target:
          entity_id:
          - number.calgary_base_station_volume
          - number.entryway_keypad_volume
        data:
          value: '2'
      - repeat:
          until:
          - condition: state
            entity_id: switch.nzbget_download
            state: 'off'
          sequence:
          - service: switch.turn_off
            data: {}
            target:
              entity_id: switch.nzbget_download
          - delay:
              hours: 0
              minutes: 0
              seconds: 10
              milliseconds: 0
      - repeat:
          until:
          - condition: state
            entity_id: switch.deluge_switch
            state: 'off'
          sequence:
          - service: switch.turn_off
            data: {}
            target:
              entity_id: switch.deluge_switch
    - conditions:
      - condition: state
        entity_id: input_boolean.meeting_time
        state: 'off'
      sequence:
      - service: automation.turn_on
        target:
          entity_id: automation.doorbell_front_ring
        data: {}
      - service: media_player.volume_set
        target:
          entity_id:
          - media_player.dining_room_speaker
          - media_player.kitchen_ceiling
          - media_player.living_room_speaker
          - media_player.master_bedroom_speaker
          - media_player.office_display
        data:
          volume_level: 0.6
      - device_id: 5f628eea7411345bf14420a07eaa74b3
        domain: select
        entity_id: select.doorbell_doorbell_text
        type: select_option
        option: Default Message (WELCOME)
      - device_id: 5f628eea7411345bf14420a07eaa74b3
        domain: select
        entity_id: select.doorbell_chime_type
        type: select_option
        option: Mechanical
      - service: number.set_value
        target:
          entity_id:
          - number.entryway_keypad_volume
          - number.calgary_base_station_volume
        data:
          value: '50'
      - service: switch.turn_on
        target:
          entity_id:
          - switch.nzbget_download
          - switch.deluge_switch
        data: {}
    default: []
  mode: single
- id: '1624728961777'
  alias: Switch - Library Paddle Scenes
  description: ''
  trigger:
  - platform: event
    event_type: zwave_js_value_notification
    event_data: {}
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: template
    value_template: '{{ trigger.event.data.device_id == ''928d0a9bc8ecbea27991771460adf96f''
      }}'
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ trigger.event.data.property_key_name == ''001'' and trigger.event.data.value
          == ''KeyPressed2x'' }}'
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.blinds_library_mode
        data:
          option: Manual
      - device_id: df05ff97af8cc94daa4886f41221a920
        domain: cover
        entity_id: cover.blinds_library
        type: set_position
    - conditions:
      - condition: template
        value_template: '{{ trigger.event.data.property_key_name == ''002'' and trigger.event.data.value
          == ''KeyPressed2x'' }}'
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.blinds_library_mode
        data:
          option: Manual
      - device_id: df05ff97af8cc94daa4886f41221a920
        domain: cover
        entity_id: cover.blinds_library
        type: set_position
        position: 100
    default: []
  mode: single
- id: '1624730682308'
  alias: Climate - Hot Day
  description: Sets the house colder and closes the blinds
  trigger:
  - platform: time
    at: '10:30:00'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: binary_sensor.all_windows
    state: 'off'
  - condition: not
    conditions:
    - condition: state
      entity_id: sensor.season
      state: winter
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: weather.main_floor
        above: '27'
        value_template: '{{ states.weather.main_floor.attributes.forecast[0].temperature
          }}'
      sequence:
      - service: input_select.select_option
        target:
          entity_id:
          - input_select.blinds_dining_room_mode
          - input_select.blinds_library_mode
          - input_select.blinds_stairway_mode
        data:
          option: Manual
      - service: cover.set_cover_position
        target:
          entity_id:
          - cover.blinds_dining_room
          - cover.blinds_library
          - cover.blinds_stairway
        data:
          position: 0
      - service: climate.set_temperature
        target:
          entity_id: climate.main_floor
        data:
          target_temp_high: 20.5
          target_temp_low: 17
      - service: notify.ios_all_devices
        data:
          title: Calgary Forecast
          message: Today's high is {{states.weather.main_floor.attributes.forecast[0].temperature
            }}c, setting the house to cool until bedtime.
    default: []
  mode: single
- id: '1624732955485'
  alias: System - Daily Tasks
  description: Reset things to enabled or automatic each morning
  trigger:
  - platform: time
    at: 08:00:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: input_select.select_option
    target:
      entity_id:
      - input_select.blinds_dining_room_mode
      - input_select.blinds_library_mode
      - input_select.blinds_stairway_mode
    data:
      option: Automatic
  - service: watchman.report
    data: {}
  mode: single
- id: '1625340233721'
  alias: Notify - Cabinet Access
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: cf351fbe59ff892e319b20bf7d917907
    entity_id: binary_sensor.door_office_dunny_cabinet_contact
    domain: binary_sensor
  - type: opened
    platform: device
    device_id: c693786c05cf23de0b9e7f1230a38ef9
    entity_id: binary_sensor.door_office_game_cabinet_left_contact
    domain: binary_sensor
  - type: opened
    platform: device
    device_id: b72cdc6de66aca83810a6b8167c82360
    entity_id: binary_sensor.door_office_game_cabinet_middle_contact
    domain: binary_sensor
  - type: opened
    platform: device
    device_id: 0fea03dadd789df93f86232d9ceddd08
    entity_id: binary_sensor.door_office_game_cabinet_right_contact
    domain: binary_sensor
  - type: opened
    platform: device
    device_id: f89ebd50612aa85967077bb1f42dc161
    entity_id: binary_sensor.door_office_game_cabinet_back_contact
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.mobile_app_jareds_iphone
    data:
      message: Access Detected!
      title: "\U0001F3AE {{ trigger.to_state.attributes.friendly_name }}"
      data:
        attachment:
          content-type: jpeg
          hide-thumbnail: false
        push:
          category: camera
        entity_id: camera.entryway
  mode: single
- id: '1625353078748'
  alias: Door - Washer Left Closed
  description: Alert if the washer door is closed too long because of mildew
  trigger:
  - platform: state
    entity_id: binary_sensor.washer_door
    to: 'off'
    for:
      hours: 4
      minutes: 0
      seconds: 0
    from: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.ios_all_devices
    data:
      message: The washer door has been closed for 4 hours, please open it!
      title: Washer Door
  mode: single
- id: '1626728305387'
  alias: Alarm - Disarm Tasks
  description: Things to do when the alarm is disarmed, regardless of time.
  trigger:
  - platform: state
    entity_id: alarm_control_panel.calgary_alarm
    to: disarmed
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: numeric_state
    entity_id: sensor.uptime_minutes
    above: '3.0'
  action:
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.quiet_time
    data: {}
  - repeat:
      until:
      - condition: state
        entity_id: switch.garage_cover_outlet_2
        state: 'on'
      sequence:
      - service: button.press
        data: {}
        target:
          entity_id: button.outlet1_ping_3
      - service: switch.turn_on
        target:
          entity_id: switch.garage_cover_outlet_2
        data: {}
      - delay:
          hours: 0
          minutes: 0
          seconds: 10
          milliseconds: 0
  - repeat:
      until:
      - condition: state
        entity_id: switch.entryway_outlet_1
        state: 'off'
      sequence:
      - service: button.press
        data: {}
        target:
          entity_id: button.outlet1_ping
      - service: switch.turn_off
        target:
          entity_id: switch.entryway_outlet_1
        data: {}
      - delay:
          hours: 0
          minutes: 1
          seconds: 0
          milliseconds: 0
  mode: restart
- id: '1626742350660'
  alias: Notify - Radon Alert
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.radon_becquerels
    above: '40.0'
    for: 04:00:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.ios_all_devices
    data:
      message: Radon levels have been high. Check the exhaust fan.
      title: ☢️ Radon Warning
  mode: single
- id: '1628348363097'
  alias: Tag - Alarm Disarm is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: c0633739-0e08-4507-8382-bba521aa3f01
  condition: []
  action:
  - service: script.tag_alarm_disarm
  mode: single
- id: '1628349966303'
  alias: Presence - Family is Home
  description: ''
  trigger:
  - platform: state
    entity_id: group.family_devices
    from: not_home
    to: home
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: input_boolean.guestmode
    state: 'off'
  action:
  - service: switch.turn_off
    target:
      entity_id: switch.entryway_outlet_1
    data: {}
  - service: climate.set_preset_mode
    target:
      entity_id:
      - climate.main_floor
      - climate.master_bathroom
    data:
      preset_mode: Home
  mode: single
- id: '1628780997738'
  alias: Frigate - Front Door Camera
  description: ''
  use_blueprint:
    path: hunterjm/frigate_0.10_notification.yaml
    input:
      camera: front_door
      notify_group: ios_all_devices
      update_thumbnail: true
      zones:
      - big_lawn
      - pathway
      - small_lawn
      labels:
      - person
      - cat
      - dog
      silence_timer: 30
      loiter_timer: 5
      zone_filter: true
      cooldown: 70
- id: '1630862557903'
  alias: Frigate - Back Door Camera
  description: ''
  use_blueprint:
    path: hunterjm/frigate_0.10_notification.yaml
    input:
      camera: back_door
      notify_group: ios_all_devices
      update_thumbnail: true
      labels:
      - person
      - cat
      - dog
      cooldown: 120
      silence_timer: 60
      loiter_timer: 5
- id: '1630863550440'
  alias: Frigate - Garage Camera
  description: ''
  use_blueprint:
    path: hunterjm/frigate_0.10_notification.yaml
    input:
      camera: garage
      notify_group: ios_all_devices
      update_thumbnail: true
      labels:
      - person
      cooldown: 170
      silence_timer: 60
      loiter_timer: 5
- id: '1630863640363'
  alias: Frigate - East Side Camera
  description: ''
  use_blueprint:
    path: hunterjm/frigate_0.10_notification.yaml
    input:
      camera: east_side
      notify_group: ios_all_devices
      update_thumbnail: true
      labels:
      - person
      - cat
      - dog
      cooldown: 90
      silence_timer: 60
- id: '1630863762390'
  alias: Frigate - Doorbell Camera
  description: ''
  use_blueprint:
    path: hunterjm/frigate_0.10_notification.yaml
    input:
      camera: doorbell
      notify_group: ios_all_devices
      update_thumbnail: true
      zones:
      - steps
      labels:
      - person
      - cat
      - dog
      cooldown: 130
      loiter_timer: 5
- id: '1631759913944'
  alias: Roomba - Main Floor Cleaning Lights
  description: Turn on lights to help roomba clean
  trigger:
  - platform: state
    entity_id: vacuum.main_floor
    id: main_floor_vac
  - platform: state
    entity_id: vacuum.main_floor_mop
    id: main_floor_mop
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: sun.sun
    state: below_horizon
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: vacuum.main_floor
        state: cleaning
      sequence:
      - type: turn_on
        device_id: a3be3e294e3fe7ded32e93df179bc9e5
        entity_id: light.island
        domain: light
        brightness_pct: 65
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: vacuum.main_floor
          state: cleaning
      sequence:
      - type: turn_off
        device_id: a3be3e294e3fe7ded32e93df179bc9e5
        entity_id: light.island
        domain: light
    - conditions:
      - condition: state
        entity_id: vacuum.main_floor_mop
        state: cleaning
      sequence:
      - type: turn_on
        device_id: a3be3e294e3fe7ded32e93df179bc9e5
        entity_id: light.island
        domain: light
        brightness_pct: 65
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: vacuum.main_floor_mop
          state: cleaning
      sequence:
      - type: turn_off
        device_id: a3be3e294e3fe7ded32e93df179bc9e5
        entity_id: light.island
        domain: light
    default: []
  mode: single
- id: '1632323892917'
  alias: Frigate - Internal motion based pause
  description: Disable people detection if motion from within inside the door started
    first during the day
  trigger:
  - platform: state
    id: front_door_unlocked
    entity_id: lock.front_door_lock
    from: locked
    to: unlocked
  - platform: state
    entity_id: lock.back_door_lock
    id: back_door_unlocked
    from: locked
    to: unlocked
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: sun.sun
    state: above_horizon
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: front_door_unlocked
      - condition: state
        entity_id: binary_sensor.motion_front_door_inside_occupancy
        state: 'on'
      sequence:
      - service: automation.turn_off
        data: {}
        target:
          entity_id:
          - automation.frigate_front_door_people
          - automation.frigate_doorbell_camera
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - repeat:
          until:
          - condition: device
            device_id: 17ad4d3482096182954b88c4f35bb21f
            domain: lock
            entity_id: lock.front_door_lock
            type: is_locked
          sequence:
          - delay:
              hours: 0
              minutes: 0
              seconds: 30
              milliseconds: 0
      - service: automation.turn_on
        data: {}
        target:
          entity_id:
          - automation.frigate_front_door_people
          - automation.frigate_doorbell_camera
    - conditions:
      - condition: trigger
        id: back_door_unlocked
      - condition: state
        entity_id: binary_sensor.motion_back_door_inside_occupancy
        state: 'on'
      sequence:
      - service: automation.turn_off
        data: {}
        target:
          entity_id: automation.frigate_back_door_camera
      - delay:
          hours: 0
          minutes: 2
          seconds: 0
          milliseconds: 0
      - repeat:
          until:
          - condition: device
            device_id: 87bc70b6345efdbf37f8c5b676cf3e4d
            domain: lock
            entity_id: lock.back_door_lock
            type: is_locked
          sequence:
          - delay:
              hours: 0
              minutes: 0
              seconds: 30
              milliseconds: 0
      - service: automation.turn_on
        data: {}
        target:
          entity_id: automation.frigate_back_door_camera
    default: []
  mode: parallel
- id: '1634953172080'
  alias: Space Heater - Master Bathroom
  description: ''
  trigger:
  - platform: time
    at: 06:30:00
    id: on_time
  - platform: time
    at: 07:45:00
    id: off_time
  - platform: state
    entity_id: switch.shower
    to: 'on'
    id: shower_on
  - platform: state
    entity_id: switch.shower
    id: shower_off
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: group.family_devices
    state: home
  - condition: not
    conditions:
    - condition: state
      entity_id: climate.main_floor
      state: cool
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: trigger
          id: on_time
        - condition: trigger
          id: shower_on
      sequence:
      - service: climate.turn_on
        target:
          entity_id: climate.master_bathroom
        data: {}
    - conditions:
      - condition: or
        conditions:
        - condition: trigger
          id: off_time
        - condition: trigger
          id: shower_off
      sequence:
      - service: climate.turn_off
        target:
          entity_id: climate.master_bathroom
        data: {}
    default: []
  mode: single
- id: '1638124015779'
  alias: Theater Outlet - Automation Mode
  description: Controls mode based on selection
  trigger:
  - platform: state
    entity_id: light.theater
    id: theater_on
    to: 'on'
  - platform: state
    entity_id: light.theater
    id: theater_off
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: theater_on
      sequence:
      - condition: state
        entity_id: input_select.theater_outlet_1
        state: Christmas Tree
      - service: switch.turn_on
        target:
          entity_id: switch.theater_outlet_1
    default:
    - service: switch.turn_off
      target:
        entity_id: switch.theater_outlet_1
  mode: single
- id: '1639003156826'
  alias: Light - Hallway (Zen32 Scene Controller)
  description: ''
  use_blueprint:
    path: Matt-PMCT/ZoozZen32forZwaveJs.yaml
    input:
      zooz_switch: 92b6fbece0b4dcf7deffc14526cd4a5b
      scene_1:
      - service: light.toggle
        target:
          entity_id: light.dining_room
        data: {}
      scene_2:
      - service: cover.toggle
        target:
          entity_id: cover.blinds_dining_room
        data: {}
      scene_3:
      - service: switch.toggle
        data: {}
        target:
          entity_id: switch.recessed_lights
      scene_4:
      - service: light.toggle
        target:
          entity_id: light.living_room_light
        data: {}
      scene_12: []
      scene_22:
      - service: cover.toggle
        target:
          entity_id: cover.blinds_stairway
        data: {}
- id: '1639339275903'
  alias: Alarm - Adjust Disarm Time
  description: ''
  trigger:
  - platform: time
    at: 00:01:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.workday_sensor
        state: 'on'
      sequence:
      - service: input_datetime.set_datetime
        target:
          entity_id: input_datetime.alarm_disarm
        data:
          time: 07:00:00
    - conditions:
      - condition: state
        entity_id: binary_sensor.workday_sensor
        state: 'off'
      sequence:
      - service: input_datetime.set_datetime
        target:
          entity_id: input_datetime.alarm_disarm
        data:
          time: 08:00:00
    default: []
  mode: single
- id: '1640918372825'
  alias: Switch - Sconce Remote (Brittany)
  description: ''
  use_blueprint:
    path: EPMatt/ikea_e1743.yaml
    input:
      integration: Zigbee2MQTT
      controller_entity: sensor.switch_bedroom_lamp_click
      helper_last_controller_event: input_text.bedroom_lamp_switch_last_controller_event
      action_button_up_short:
      - type: turn_on
        device_id: 036613fa607f72625263d7b3ec75d898
        entity_id: light.sconce
        domain: light
      action_button_down_release: []
      action_button_down_short:
      - type: turn_off
        device_id: 036613fa607f72625263d7b3ec75d898
        entity_id: light.sconce
        domain: light
      action_button_down_long: []
- id: '1640918565846'
  alias: Switch - Joel's Lamp
  description: ''
  use_blueprint:
    path: EPMatt/ikea_e1743.yaml
    input:
      integration: Zigbee2MQTT
      controller_entity: sensor.switch_joel_s_lamp_click
      helper_last_controller_event: input_text.joel_s_lamp_switch_last_controller_event
      action_button_up_short:
      - device_id: c85f932010ba11ebab078574827948f0
        domain: light
        entity_id: light.joels_lamp
        type: brightness_increase
        brightness_pct: 15
      action_button_down_short:
      - device_id: c85f932010ba11ebab078574827948f0
        domain: light
        entity_id: light.joels_lamp
        type: brightness_decrease
      action_button_down_double:
      - type: turn_off
        device_id: c85f932010ba11ebab078574827948f0
        entity_id: light.joels_lamp
        domain: light
      action_button_up_double:
      - type: turn_on
        device_id: c85f932010ba11ebab078574827948f0
        entity_id: light.joels_lamp
        domain: light
        brightness_pct: 80
      helper_double_press_delay: 800
- id: '1640919262103'
  alias: Switch - Stairway Blinds
  description: ''
  use_blueprint:
    path: EPMatt/ikea_e1766.yaml
    input:
      integration: Zigbee2MQTT
      controller_entity: sensor.switch_stairway_blinds_click
      helper_last_controller_event: input_text.bedroom_lamp_switch_last_controller_event
      action_button_up_short:
      - service: cover.open_cover
        target:
          entity_id: cover.blinds_stairway
      action_button_up_double:
      - service: cover.open_cover
        target:
          entity_id:
          - cover.blinds_library
          - cover.blinds_stairway
      action_button_down_short:
      - service: cover.close_cover
        target:
          entity_id: cover.blinds_stairway
      action_button_down_double:
      - service: cover.close_cover
        target:
          entity_id:
          - cover.blinds_stairway
          - cover.blinds_library
      helper_double_press_delay: 800
- id: '1641056937814'
  alias: Notify - Sonarr Queue
  description: Alert when the queue has been stuck for a while
  trigger:
  - platform: numeric_state
    entity_id: sensor.sonarr_queue
    above: '1'
    for: 04:00:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.mobile_app_jareds_iphone
    data:
      title: Sonarr Queue Stuck
      message: The queue length has been {{ states.sensor.sonarr_queue.state }}, for
        at least 4 hours.
  mode: single
- id: '1641941397685'
  alias: White Noise - Toggle Control
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.white_noise
    id: toggle_on
    to: 'on'
  - platform: state
    entity_id: input_boolean.white_noise
    id: toggle_off
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: toggle_on
      sequence:
      - service: script.white_noise
        data: {}
    default:
    - service: script.turn_off
      data: {}
      target:
        entity_id: script.white_noise
    - service: media_player.turn_off
      data: {}
      target:
        entity_id: media_player.joels_room_speaker
  mode: parallel
- id: '1644108458337'
  alias: Roomba - Second Floor Cleaning Lights
  description: Turn on lights to help roomba clean
  trigger:
  - platform: state
    entity_id: vacuum.twinkly_dink
    id: sec_floor_vac
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: time
    after: '16:00:00'
    before: '18:00:00'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: vacuum.twinkly_dink
        state: cleaning
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 100
        target:
          entity_id:
          - light.library
          - light.joels_lamp
          - light.sconce
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: vacuum.twinkly_dink
          state: cleaning
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id:
          - light.library
          - light.joels_lamp
          - light.sconce
    default: []
  mode: single
- id: '1647370486121'
  alias: Guest Mode - Automatic Management
  description: Turn on/off based on guests at home.
  trigger:
  - platform: state
    entity_id: person.bobbi
    id: bobbi_home
    from: not_home
    to: home
  - platform: state
    entity_id: person.bobbi
    id: bobbi_away
    from: home
    to: not_home
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: bobbi_home
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.guestmode
    - conditions:
      - condition: trigger
        id: bobbi_away
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.guestmode
    default: []
  mode: single
- id: '1649874277269'
  alias: Switch - Sconce Remote (Jared)
  description: ''
  use_blueprint:
    path: EPMatt/ikea_e1743.yaml
    input:
      integration: Zigbee2MQTT
      controller_entity: sensor.switch_jared_sconce_click
      helper_last_controller_event: input_text.sconce_jared_switch_last_controller_event
      action_button_up_short:
      - service: light.turn_on
        data: {}
        target:
          entity_id: light.sconce
      action_button_up_long:
      - service: light.turn_on
        data:
          brightness_pct: 100
        target:
          entity_id: light.sconce
      action_button_down_short:
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.sconce
      action_button_down_long:
      - device_id: 036613fa607f72625263d7b3ec75d898
        domain: light
        entity_id: light.sconce
        type: brightness_decrease
- id: '1651803654230'
  alias: Wall Tablet - Battery Management
  description: ''
  use_blueprint:
    path: seamus65/wallpanel-battery-management.yaml
    input:
      battery: sensor.jareds_ipad_battery_level
      charger: switch.ipad
- id: '1652556732873'
  alias: Switch - Joel's Blind
  description: ''
  use_blueprint:
    path: EPMatt/ikea_e1766.yaml
    input:
      integration: Zigbee2MQTT
      controller_entity: sensor.switch_joel_s_blinds_click
      helper_last_controller_event: input_text.joel_s_blind_switch_last_controller_event
      action_button_up_short:
      - service: cover.open_cover
        data: {}
        target:
          entity_id: cover.blinds_joel_s_room
      action_button_down_short:
      - service: cover.open_cover
        data: {}
        target:
          entity_id: cover.blinds_joel_s_room
- id: '1653680967962'
  alias: Notify - Sump Pump Alert
  description: ''
  trigger:
  - type: vibration
    platform: device
    device_id: fc8fc558fc3f46f6bc00362ba1d972cd
    entity_id: binary_sensor.vibration_sump_pump_vibration
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.ios_all_devices
    data:
      message: Sump pump vibration detected and it could be pumping water.
      title: "\U0001F6B0 Sump Warning"
  mode: single
- id: '1657998565302'
  alias: Office Receiver - Buttons
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_button.office_receiver_power
    id: power
  - platform: state
    entity_id:
    - input_button.office_receiver_input_tv
    id: input_tv
  - platform: state
    entity_id:
    - input_button.office_receiver_ps5
    id: input_game
  - platform: state
    entity_id:
    - input_button.office_receiver_xbox_s_x
    id: input_bddvd
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: power
      sequence:
      - service: remote.send_command
        data:
          device: office_receiver
          command: power_toggle
        target:
          entity_id: remote.office_rm4mini_remote
    - conditions:
      - condition: trigger
        id: input_tv
      sequence:
      - service: remote.send_command
        data:
          device: office_receiver
          command: input_tv
        target:
          entity_id: remote.office_rm4mini_remote
    - conditions:
      - condition: trigger
        id: input_game
      sequence:
      - service: remote.send_command
        data:
          device: office_receiver
          command: input_game
        target:
          entity_id: remote.office_rm4mini_remote
    - conditions:
      - condition: trigger
        id: input_bddvd
      sequence:
      - service: remote.send_command
        data:
          device: office_receiver
          command: input_bddvd
        target:
          entity_id: remote.office_rm4mini_remote
    default: []
  mode: single
- id: '1658090775498'
  alias: Office Reciever - Turn on Input TV
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.office_desktop_audio_session_app
    to: firefox
    id: office_desktop_app_firefox
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: office_desktop_app_firefox
      - condition: numeric_state
        entity_id: sensor.office_desktop_audio_peak_volume
        above: '0'
      sequence:
      - service: remote.send_command
        data:
          device: office_receiver
          command: input_tv
        target:
          entity_id: remote.office_rm4mini_remote
    default: []
  mode: single
- id: '1658685118605'
  alias: Input Boolean - Office Amp Detection
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.office_amp_outlet_energy_power
    above: '1'
    id: amp_consumption_above
  - platform: numeric_state
    entity_id: sensor.office_amp_outlet_energy_power
    id: amp_consumption_below
    below: '1'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: amp_consumption_above
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.office_amp
    - conditions:
      - condition: trigger
        id: amp_consumption_below
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.office_amp
    default: []
  mode: single
- id: '1661008070079'
  alias: Frigate - Hello Creeper
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.front_door_person
    above: '0'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: time
    before: input_datetime.alarm_disarm
    after: input_datetime.alarm_arm
    weekday: []
  action:
  - service: tts.google_say
    data:
      entity_id: media_player.doorbell_speaker
      cache: true
      message: Uh…hello?
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: tts.google_say
    data:
      entity_id: media_player.doorbell_speaker
      cache: true
      message: What are you doing here?
  - delay:
      hours: 0
      minutes: 0
      seconds: 4
      milliseconds: 0
  - service: tts.google_say
    data:
      entity_id: media_player.doorbell_speaker
      cache: true
      message: 'Uhm, ok, well '
  - delay:
      hours: 0
      minutes: 0
      seconds: 4
      milliseconds: 0
  - service: tts.google_say
    data:
      entity_id: media_player.doorbell_speaker
      cache: true
      message: I didn’t think you would be here at this hour
  - delay:
      hours: 0
      minutes: 0
      seconds: 4
      milliseconds: 0
  - service: tts.google_say
    data:
      entity_id: media_player.doorbell_speaker
      cache: true
      message: Sorry can you say that again?
  - delay:
      hours: 0
      minutes: 0
      seconds: 4
      milliseconds: 0
  - service: tts.google_say
    data:
      entity_id: media_player.doorbell_speaker
      cache: true
      message: Ok, well, maybe you should just leave.
  mode: single
