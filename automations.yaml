- id: '1593612773178'
  alias: Remote - Select Activity
  description: ''
  trigger:
  - entity_id: input_select.harmony
    from: Select Activity
    platform: state
  condition: []
  action:
  - data:
      data_template:
        activity: "{% if is_state(\"input_select.harmony\", \"Watch Plex\") %}\n \
          \ 27670057\n{% elif is_state(\"input_select.harmony\", \"Watch DVD\") %}\n\
          \  37587221\n{% elif is_state(\"input_select.harmony\", \"Power Off\") %}\n\
          \  -1\n{% else %} {% endif %}"
    entity_id: remote.living_room
    service: remote.turn_on
  - data:
      option: Select Activity
    entity_id: input_select.harmony
    service: input_select.select_option
- id: '1577904430400'
  alias: System - Dropbox Backup Sync
  description: Synchronize hass.io snapshots to Dropbox
  trigger:
  - at: '12:00:00'
    platform: time
  condition:
  - after: '12:00:00'
    before: 02:00:00
    condition: time
    weekday:
    - sun
  action:
  - data:
      addon: 7be23ff5_dropbox_sync
      input:
        command: upload
    service: hassio.addon_stdin
  mode: single
- id: '1591481819436'
  alias: System - Startup Tasks
  description: ''
  trigger:
  - event: start
    platform: homeassistant
  condition: []
  action:
  - delay: 00:00:20
  - data:
      addon: a0d7b954_nodered
    service: hassio.addon_restart
  - data:
      payload: announce
      topic: shellies/command
    service: mqtt.publish
  mode: single
- id: '1603043020584'
  alias: Doorbell - Front Ring
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.doorbell_doorbell
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: time
    after: 08:00:00
    before: '22:00:00'
  - condition: state
    entity_id: group.family_devices
    state: home
  action:
  - service: media_player.play_media
    data:
      media_content_id: https://home.eatsleepbreach.ca/local/doorbell_front.mp3
      media_content_type: music
    target:
      device_id:
      - c038376b0bd411ebb661915fc419dff9
      - c03750400bd411ebbd21d302c0018c1a
  - service: camera.play_stream
    data:
      media_player: media_player.master_bedroom_display
    target:
      device_id: 5f628eea7411345bf14420a07eaa74b3
  - delay:
      hours: 0
      minutes: 2
      seconds: 0
      milliseconds: 0
  - service: media_player.turn_off
    data: {}
    entity_id: media_player.master_bedroom_display
  mode: single
- id: '1602687924312'
  alias: Cover - Garage Door Opened
  description: ''
  trigger:
  - platform: state
    entity_id: cover.garage_door
    from: closed
    to: open
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.ios_all_devices
    data:
      message: Garage Cover has been opened.
      title: ðŸš— Garage Cover Opened!
      data:
        attachment:
          content-type: jpeg
          hide-thumbnail: false
        push:
          category: camera
        entity_id: camera.back_door_snapshot
  mode: single
- id: '1602786040005'
  alias: Notify - Mailbox
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.vibration_mailbox
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.ios_all_devices
    data:
      message: You've got mail!
      title: ðŸ“¬ Mailbox
      data:
        attachment:
          content-type: jpeg
          hide-thumbnail: false
        push:
          category: camera
        entity_id: camera.front_door_snapshot
  mode: single
- id: '1591375582026'
  alias: Lock - Secure all at 10pm
  description: ''
  trigger:
  - at: '22:00:00'
    platform: time
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - data: {}
    entity_id: lock.front_door
    service: lock.lock
  - data: {}
    entity_id: lock.back_door
    service: lock.lock
  - data: {}
    entity_id: lock.garage_door
    service: lock.lock
  mode: single
- id: '1602346908294'
  alias: Lock - Front Door Unlocked
  description: ''
  trigger:
  - platform: state
    entity_id: lock.front_door
    from: locked
    to: unlocked
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.ios_all_devices
    data:
      message: Front Door has been opened.
      title: ðŸšª Front Door Unlocked!
      data:
        attachment:
          content-type: jpeg
          hide-thumbnail: false
        push:
          category: camera
        entity_id: camera.front_door_snapshot
  mode: single
- id: '1603502802809'
  alias: Lock - Back Door Unlocked
  description: ''
  trigger:
  - platform: state
    entity_id: lock.back_door
    from: locked
    to: unlocked
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.ios_all_devices
    data:
      message: Back Door has been opened.
      title: ðŸšª Back Door Unlocked!
      data:
        attachment:
          content-type: jpeg
          hide-thumbnail: false
        push:
          category: camera
        entity_id: camera.back_door_snapshot
  mode: single
- id: '1602687787297'
  alias: Lock - Garage Door Unlocked
  description: ''
  trigger:
  - platform: state
    entity_id: lock.garage_door
    from: locked
    to: unlocked
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.ios_all_devices
    data:
      message: Garage Door has been opened.
      title: ðŸšª Garage Door Unlocked!
      data:
        attachment:
          content-type: jpeg
          hide-thumbnail: false
        push:
          category: camera
        entity_id: camera.back_door_snapshot
  mode: single
- id: '1602440187444'
  alias: Amps - Power Control
  description: ''
  trigger:
  - platform: state
    entity_id: media_player.patio_speaker
  - platform: state
    entity_id: media_player.master_bedroom_speaker
  - platform: state
    entity_id: media_player.kitchen_ceiling
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ trigger.to_state.state == ''playing'' }}'
      sequence:
      - service: switch.turn_on
        data: {}
        entity_id: switch.amp
    default:
    - service: switch.turn_off
      data: {}
      entity_id: switch.amp
  mode: single
- id: '1602435177490'
  alias: Light - Seasonal Effects
  description: ''
  trigger:
  - platform: state
    entity_id: light.front_porch
    to: 'on'
    from: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sensor.month
        state: December
      sequence:
      - service: light.turn_on
        data:
          effect: Christmas
        entity_id: light.front_porch
    - conditions:
      - condition: state
        entity_id: sensor.month
        state: October
      sequence:
      - service: light.turn_on
        data:
          effect: Halloween
    default: []
  mode: single
- id: '1602430306575'
  alias: Light - Sunrise
  description: ''
  trigger:
  - platform: sun
    event: sunrise
    offset: 00:10:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: switch.turn_off
    data:
      entity_id: switch.front_door, switch.back_door, switch.garage_exterior_lights
  - type: turn_off
    device_id: 38d965d356ff44218994d149daf1634c
    entity_id: light.front_porch
    domain: light
  mode: single
- id: '1602430417396'
  alias: Light - Sunset
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: -00:05:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: switch.turn_on
    data:
      entity_id: switch.front_door, switch.back_door, switch.garage_exterior_lights
  - service: light.turn_on
    data:
      brightness_pct: 100
      color_name: yellow
    entity_id: light.front_porch
  mode: single
- id: '1598110682886'
  alias: Cover - Garage Cover Open for 5 Minutes
  description: ''
  trigger:
  - entity_id: cover.garage_door
    for: 00:05:00
    from: closed
    platform: state
    to: open
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - data:
      actions:
      - action: close_garage
        title: Close Garage Door
      message: Garage door has been open for 5 minutes. Close it?
      title: ðŸš™ Garage left open!
    service: notify.ios_all_devices
  mode: single
- id: '1602273830036'
  alias: Laundry - Washer Cycle Complete
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.washer
    from: 0:02
    to: 0:01
    attribute: remain_time
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.ios_all_devices
    data:
      title: ðŸ‘• Washer is done!
      message: '{%- if is_state(''sensor.dryer'', ''on'') %}Dryer will be done in
        {{ relative_time(states.sensor.dryer.attributes.remain_time) }}{%- else -%}Cycle
        took {{ relative_time(states.sensor.washer.attributes.initial_time) }}{% endif
        %}'
  mode: single
- id: '1602274353769'
  alias: Laundry - Dryer Cycle Complete
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.dryer
    attribute: remain_time
    to: 0:01
    from: 0:02
  condition: []
  action:
  - service: notify.ios_all_devices
    data:
      title: ðŸ§¦ Dryer is done!
      message: '{%- if is_state(''sensor.washer'', ''on'') %}Washer will be done in
        {{ relative_time(states.sensor.washer.attributes.remain_time) }}{%- else -%}Cycle
        took {{ relative_time(states.sensor.dryer.attributes.initial_time) }}{% endif
        %}'
  mode: single
- id: '1604401387451'
  alias: Light - Lamp Brightness
  description: ''
  trigger:
  - platform: state
    entity_id: light.bedroom_lamp
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: time
    after: '22:00:00'
    before: 08:00:00
  action:
  - service: light.turn_on
    data:
      brightness: 1
    entity_id: light.bedroom_lamp
  mode: single
- id: '1604869773228'
  alias: System - Reset Monthly Counters
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.dateofthemonth
    to: 1st
  condition: []
  action:
  - service: counter.reset
    data: {}
    entity_id: counter.front_door_motion_events
  - service: counter.reset
    data: {}
    entity_id: counter.doorbell_motion_events
  - service: counter.reset
    data: {}
    entity_id: counter.back_door_motion_events
  mode: single
- id: '1604942076638'
  alias: Notify - Cabinets Open
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.door_game_cabinet_left
    from: 'off'
    to: 'on'
  - platform: state
    entity_id: binary_sensor.door_game_cabinet_middle
    from: 'off'
    to: 'on'
  - platform: state
    entity_id: binary_sensor.door_game_cabinet_right
    from: 'off'
    to: 'on'
  - platform: state
    entity_id: binary_sensor.door_dunny_cabinet
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: notify.mobile_app_iphone
    data:
      message: Access Detected!
      title: ðŸŽ® {{ trigger.to_state.attributes.friendly_name }}
      data:
        attachment:
          content-type: jpeg
          hide-thumbnail: false
        push:
          category: camera
        entity_id: camera.entryway
  mode: single
- id: '1605135271786'
  alias: Shower - Close Bedroom Blinds
  description: ''
  trigger:
  - platform: state
    entity_id: light.light_shower
    to: 'on'
    for: 00:00:05
  condition:
  - condition: state
    entity_id: cover.blinds_joels_room
    state: open
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: cover.close_cover
    data: {}
    entity_id: cover.blinds_joels_room
  mode: single
- id: '1605809987611'
  alias: Waste Collection - Blue Bin Alert
  description: ''
  trigger:
  - platform: time
    at: '17:00:00'
  condition:
  - condition: state
    entity_id: sensor.blue_bin
    state: Tomorrow
  action:
  - service: light.turn_on
    data:
      brightness_pct: 100
      color_name: blue
    entity_id: light.kitchen_left_led
  mode: single
- id: '1605810026447'
  alias: Waste Collection - Green Bin Alert
  description: ''
  trigger:
  - platform: time
    at: '17:00:00'
  condition:
  - condition: state
    entity_id: sensor.green_bin
    state: Tomorrow
  action:
  - service: light.turn_on
    data:
      brightness_pct: 100
      color_name: green
    entity_id: light.kitchen_right_led
  mode: single
- id: '1605810087167'
  alias: Waste Collection - Black Bin Alert
  description: ''
  trigger:
  - platform: time
    at: '17:00:00'
  condition:
  - condition: state
    entity_id: sensor.black_bin
    state: tomorrow
  action:
  - service: light.turn_on
    data:
      brightness_pct: 100
      color_name: red
    entity_id: light.kitchen_cabinets
  mode: single
- id: '1606157806943'
  alias: Modem - Reboot
  description: Reboots the modem if the gateway WAN interface is down
  trigger:
  - platform: state
    entity_id: sensor.pfsense_gateway_wan_dhcp
    to: 'False'
    for: 00:05:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - repeat:
      until:
      - condition: state
        entity_id: sensor.pfsense_gateway_wan_dhcp
        state: 'True'
      sequence:
      - service: notify.mobile_app_iphone
        data:
          message: WAN gateway failed, rebooting.
          title: ðŸ–€ Modem Failure!
      - service: switch.turn_off
        data: {}
        entity_id: switch.modem
      - delay: 00:01:00
      - service: switch.turn_on
        data: {}
        entity_id: switch.modem
      - delay: 00:30:00
  mode: single
- id: '1607991157120'
  alias: Notify - Refrigerator Open
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: 22563bf3546620268953e47f24177bf8
    entity_id: binary_sensor.door_refridgerator
    domain: binary_sensor
    for:
      hours: 0
      minutes: 5
      seconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - repeat:
      until:
      - type: is_not_open
        condition: device
        device_id: 22563bf3546620268953e47f24177bf8
        entity_id: binary_sensor.door_refridgerator
        domain: binary_sensor
      sequence:
      - service: notify.ios_all_devices
        data:
          message: Close the fridge!
          title: ðŸ§Š Refrigerator
      - delay: 00:02:00
  mode: single
- id: '1608008281551'
  alias: Alarm - Disarm
  description: ''
  trigger:
  - platform: time
    at: input_datetime.alarm_disarm
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: group.family_devices
    state: home
  action:
  - service: switch.turn_on
    data: {}
    entity_id: switch.garage_cover_outlet_2
  - service: alarm_control_panel.alarm_disarm
    data: {}
    entity_id: alarm_control_panel.calgary_alarm
  mode: single
- id: '1608334851404'
  alias: Alarm - Arm Home
  description: ''
  trigger:
  - platform: time
    at: input_datetime.alarm_arm
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: group.family_devices
    state: home
  - condition: state
    entity_id: group.locks
    state: locked
  - condition: state
    entity_id: group.alarm_sensors
    state: 'off'
  action:
  - service: switch.turn_off
    data: {}
    entity_id: switch.garage_cover_outlet_2
  - service: alarm_control_panel.alarm_arm_home
    data: {}
    entity_id: alarm_control_panel.calgary_alarm
  mode: single
- id: '1609684788084'
  alias: Alarm - Arm Away
  description: ''
  trigger:
  - platform: state
    entity_id: group.family_devices
    from: home
    to: not_home
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: input_boolean.guestmode
    state: 'off'
  action:
  - service: alarm_control_panel.alarm_arm_away
    data: {}
    entity_id: alarm_control_panel.calgary_alarm
  mode: single
- id: '1611778095556'
  alias: Camera - Weather Control
  description: Disable image processing due to weather
  trigger:
  - platform: state
    entity_id: weather.calgary_olympic_park
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: weather.calgary_olympic_park
        state: snowy
      sequence:
      - service: input_select.select_option
        data:
          option: Local
        entity_id: input_select.image_processing_mode
      - delay:
          hours: 0
          minutes: 10
          seconds: 0
          milliseconds: 0
    default:
    - delay:
        hours: 0
        minutes: 30
        seconds: 0
        milliseconds: 0
  mode: single
- id: '1613012477376'
  alias: Music - White noise
  description: ''
  trigger:
  - platform: state
    entity_id: media_player.joels_room_speaker
    attribute: media_title
    to: White noise
  - platform: state
    entity_id: media_player.master_bedroom_display
    attribute: media_title
    to: White noise
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: media_player.volume_set
    data:
      volume_level: 0.8
      entity_id: '{{ trigger.entity_id }}'
  mode: single
- id: '1613599134512'
  alias: Printer - Power Control
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.lexmark_cs310_series
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: sensor.lexmark_cs310_series
          state: idle
      sequence:
      - service: switch.turn_on
        data: {}
        entity_id: switch.printer
    - conditions:
      - condition: state
        entity_id: sensor.lexmark_cs310_series
        state: idle
        for: 00:20:00
      sequence:
      - service: switch.turn_off
        data: {}
        entity_id: switch.printer
    default: []
  mode: single
- id: '1613942808856'
  alias: Space Heater - Temperature Control
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.master_bathroom_temperature
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: group.family_devices
    state: home
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.master_bathroom_temperature
        below: '21.4'
      - condition: state
        entity_id: switch.space_heater
        state: 'off'
      - condition: time
        after: 06:00:00
        before: 09:00:00
      sequence:
      - service: switch.turn_on
        data: {}
        entity_id: switch.space_heater
    - conditions:
      - condition: numeric_state
        entity_id: sensor.master_bathroom_temperature
        above: '21.8'
      - condition: state
        entity_id: switch.space_heater
        state: 'on'
      sequence:
      - service: switch.turn_off
        data: {}
        entity_id: switch.space_heater
    default: []
  mode: single
- id: '1613960679848'
  alias: System - Certificate Renewal
  description: ''
  use_blueprint:
    path: bkbilly/certificate-expiration.yaml
    input:
      days_input: '9'
      certificate_input: sensor.cert_expiry_timestamp_home_eatsleepbreach_ca
      time_input: '1:00:00'
- id: '1614301350375'
  alias: Camera - Cost Control
  description: Disable image processing due to count limit
  trigger:
  - platform: state
    entity_id: sensor.total_month_camera_events
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: not
    conditions:
    - condition: state
      entity_id: weather.calgary_olympic_park
      state: snowy
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.total_month_camera_events
        above: '994.0'
      sequence:
      - service: input_select.select_option
        data:
          option: Local
        entity_id: input_select.image_processing_mode
    - conditions:
      - condition: numeric_state
        entity_id: sensor.total_month_camera_events
        below: '995.0'
      sequence:
      - service: input_select.select_option
        data:
          option: Cloud
        entity_id: input_select.image_processing_mode
    default: []
  mode: single
- id: '1614538081222'
  alias: Light - Basement Stairs
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: 44eae6990c494cfd8a209f98a436e74e
    entity_id: binary_sensor.basement_door
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - condition: device
    type: is_off
    device_id: 8630210676794c5992b4a2c92a73f90d
    entity_id: switch.basement_stairs
    domain: switch
  - service: switch.turn_on
    data: {}
    entity_id: switch.basement_stairs
  - delay:
      hours: 0
      minutes: 1
      seconds: 0
      milliseconds: 0
  mode: single
- id: '1614558915813'
  alias: Climate - Window Control
  description: ''
  trigger:
  - platform: state
    entity_id: group.all_windows
    for: 00:05:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: group.all_windows
        state: 'on'
      sequence:
      - device_id: a3a722fbf9001c1051f06703aaeb803c
        domain: climate
        entity_id: climate.main_floor
        type: set_hvac_mode
        hvac_mode: 'off'
      - service: climate.set_fan_mode
        data:
          fan_mode: 'on'
        target:
          device_id: a3a722fbf9001c1051f06703aaeb803c
    - conditions:
      - condition: state
        entity_id: group.all_windows
        state: 'off'
        for: 00:05:00
      sequence:
      - device_id: a3a722fbf9001c1051f06703aaeb803c
        domain: climate
        entity_id: climate.main_floor
        type: set_hvac_mode
        hvac_mode: heat_cool
      - service: climate.set_fan_mode
        data:
          fan_mode: Auto
        target:
          device_id: a3a722fbf9001c1051f06703aaeb803c
    default: []
  mode: single
- id: '1614829216486'
  alias: Light - Kitchen Night Light
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: cf02d2ad7ec8594e892e42aa8e5b01aa
    entity_id: binary_sensor.motion_hallway
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: device
    type: is_off
    device_id: 5d5445200b93486c913a08288bae6621
    entity_id: switch.kitchen_light
    domain: switch
  - condition: device
    type: is_off
    device_id: e10c450fa7254d54804c43d5eaacbfcf
    entity_id: light.dining_room
    domain: light
  - condition: state
    entity_id: sun.sun
    state: below_horizon
  - condition: device
    type: is_off
    device_id: d0cd794a0c194393b3836b635d6220ee
    entity_id: light.island
    domain: light
  action:
  - service: light.turn_on
    data:
      color_name: yellow
    target:
      entity_id: light.kitchen_cabinets
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - service: light.turn_off
    data: {}
    entity_id: light.kitchen_cabinets
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  mode: single
- id: '1615395552931'
  alias: Blind - Dining Room
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: 00:05:00
  - platform: time
    at: 08:30:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: input_select.blinds_dining_room_mode
    state: Automatic
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sun.sun
        state: below_horizon
      - type: is_not_open
        condition: device
        device_id: 773fc559024ac11ecb6a9280b38a9bce
        entity_id: binary_sensor.dining_room_window
        domain: binary_sensor
        for:
          hours: 0
          minutes: 0
          seconds: 15
          milliseconds: 0
      sequence:
      - device_id: 27d4e2d3b62aeea7815697f4dafa12c7
        domain: cover
        entity_id: cover.blinds_dining_room
        type: set_position
    - conditions:
      - condition: state
        entity_id: sun.sun
        state: above_horizon
      - condition: time
        after: 08:30:00
      sequence:
      - device_id: 27d4e2d3b62aeea7815697f4dafa12c7
        domain: cover
        entity_id: cover.blinds_dining_room
        type: set_position
        position: 100
    default: []
  mode: single
- id: '1615478976864'
  alias: Switch - Basement Stairs Inactivity
  description: ''
  trigger:
  - platform: device
    type: turned_on
    device_id: 8630210676794c5992b4a2c92a73f90d
    entity_id: switch.basement_stairs
    domain: switch
    for:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - type: is_no_motion
    condition: device
    device_id: e8d280d931dfd93ddacfcfe74785c318
    entity_id: binary_sensor.stairway_motion
    domain: binary_sensor
  action:
  - type: turn_off
    device_id: 8630210676794c5992b4a2c92a73f90d
    entity_id: switch.basement_stairs
    domain: switch
  mode: single
- id: '1615652464813'
  alias: Blind - Library
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: 00:05:00
  - platform: time
    at: 08:30:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: input_select.blinds_library_mode
    state: Automatic
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sun.sun
        state: below_horizon
      - type: is_not_open
        condition: device
        device_id: 4c12bdfa77964af0ab5342561f3e6286
        entity_id: binary_sensor.library_window
        domain: binary_sensor
        for:
          hours: 0
          minutes: 0
          seconds: 15
          milliseconds: 0
      sequence:
      - device_id: 27d4e2d3b62aeea7815697f4dafa12c7
        domain: cover
        entity_id: cover.blinds_dining_room
        type: set_position
    - conditions:
      - condition: state
        entity_id: sun.sun
        state: above_horizon
      - condition: time
        after: 08:30:00
      sequence:
      - device_id: df05ff97af8cc94daa4886f41221a920
        domain: cover
        entity_id: cover.blinds_library
        type: set_position
        position: 100
    default: []
  mode: single
- id: '1615652668231'
  alias: Blind - Stairway
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: 00:05:00
  - platform: time
    at: 08:30:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: input_select.blinds_stairway_mode
    state: Automatic
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sun.sun
        state: below_horizon
      sequence:
      - device_id: c929b61ad5321e3207f60bccc556b756
        domain: cover
        entity_id: cover.blinds_stairway
        type: set_position
    - conditions:
      - condition: state
        entity_id: sun.sun
        state: above_horizon
      - condition: time
        after: 08:30:00
      sequence:
      - device_id: c929b61ad5321e3207f60bccc556b756
        domain: cover
        entity_id: cover.blinds_stairway
        type: set_position
        position: 100
    default: []
  mode: single
- id: '1615652764733'
  alias: Blind - Joel's Room
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: 00:05:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sun.sun
        state: below_horizon
      sequence:
      - device_id: 269012f56589fb928303bc8dad06c38b
        domain: cover
        entity_id: cover.blinds_joels_room
        type: set_position
    default: []
  mode: single
- id: '1615654024825'
  alias: Light - Away and Forgotten
  description: Turns off lights if we are away but some were left on
  trigger:
  - platform: state
    entity_id: group.family_devices
    to: not_home
    for: 00:30:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  - condition: state
    entity_id: input_boolean.homesitter
    state: 'off'
  - condition: state
    entity_id: input_boolean.guestmode
    state: 'off'
  action:
  - service: switch.turn_off
    target:
      device_id:
      - 8630210676794c5992b4a2c92a73f90d
      - 5d5445200b93486c913a08288bae6621
  - service: light.turn_off
    target:
      device_id:
      - b81d2f783e3141c8ab4ba540ad2588f9
      - 92c693c7e4267438802e4bb8edbfa0bf
      - 2a6a260b4e91c9e047f88a0f2702267d
      - e10c450fa7254d54804c43d5eaacbfcf
      - d0cd794a0c194393b3836b635d6220ee
      - 906273b7b475468ea078b648fae1327b
      - 5a65f08231d24a079cfcf0d0f9c10717
      - 0ca9e01b57cc4159b389cf67344516ee
      entity_id: light.kitchen_cabinets
  mode: single
- id: '1615754157293'
  alias: Tag - Front Door Camera
  description: Turns off camera alerts when scanned
  trigger:
  - platform: tag
    tag_id: 07a17b17-1185-4176-b8ee-9e45dcab91e8
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: input_select.select_option
    data:
      option: Disabled
    target:
      entity_id: input_select.camera_person_alerts
  mode: single
- id: '1615757783776'
  alias: Tag - Back Door Camera
  description: Turns off camera alerts when scanned
  trigger:
  - platform: tag
    tag_id: d8e2ba2e-778c-41a1-a2ef-2a5a15142534
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - service: input_select.select_option
    data:
      option: Front Door
    target:
      entity_id: input_select.camera_person_alerts
  mode: single
- id: '1615761299458'
  alias: Tag - Alarm Disarm
  description: ''
  trigger:
  - platform: tag
    tag_id: c0633739-0e08-4507-8382-bba521aa3f01
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - device_id: d2f4d5b400ef24f2f92f7e5beb98fd34
    domain: alarm_control_panel
    entity_id: alarm_control_panel.calgary_alarm
    type: disarm
    code: ''
  mode: single
- id: '1615991554264'
  alias: Chromecasts - Reboot
  description: Reboot the chromecast audio devices when they become unavailable
  trigger:
  - platform: state
    entity_id: media_player.kitchen_ceiling
    to: unavailable
    for: 00:01:00
  - platform: state
    entity_id: media_player.master_bedroom_speaker
    to: unavailable
    for: 00:01:00
  - platform: state
    entity_id: media_player.patio_speaker
    to: unavailable
    for: 00:01:00
  condition:
  - condition: state
    entity_id: input_boolean.automations
    state: 'on'
  action:
  - condition: not
    conditions:
    - condition: state
      entity_id: media_player.kitchen_ceiling
      state: playing
  - condition: not
    conditions:
    - condition: state
      entity_id: media_player.master_bedroom_speaker
      state: playing
  - condition: not
    conditions:
    - condition: state
      entity_id: media_player.patio_speaker
      state: playing
  - type: turn_off
    device_id: 5dcc8797a37fb061b95d18f479e563cc
    entity_id: switch.chromecasts
    domain: switch
  - delay:
      hours: 0
      minutes: 0
      seconds: 30
      milliseconds: 0
  - type: turn_on
    device_id: 5dcc8797a37fb061b95d18f479e563cc
    entity_id: switch.chromecasts
    domain: switch
  mode: single
